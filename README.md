# OpenAI to Z Challenge: Amazon Archaeological Discovery System

This project is a comprehensive, AI-powered pipeline designed to discover previously unknown archaeological sites in the Amazon basin. It leverages a multi-modal approach, combining advanced satellite data processing, AI-driven analysis, and an agentic workflow to identify and evaluate potential sites of interest.

## Overview

The system automates the entire discovery process, from generating candidate sites to producing a detailed final report. It uses a variety of public data sources, including satellite imagery, elevation models, and biodiversity records, to find subtle anomalies that may indicate human activity. An agentic research workflow, powered by large language models like GPT-4.1, iteratively analyzes each site, refines hypotheses, and calculates a confidence score for its archaeological potential.

## Key Features

-   **Multi-Source Data Acquisition**: Automatically fetches data from Sentinel-1/2, Landsat, various Digital Elevation Models (DEMs), and the Global Biodiversity Information Facility (GBIF).
-   **Advanced Anomaly Detection**: Employs statistical methods to detect subtle terrain, vegetation, and SAR anomalies.
-   **AI-Powered Site Evaluation**: Uses OpenAI models for expert-level archaeological assessment and hypothesis generation.
-   **Agentic Research Workflow**: An iterative process refines the analysis for each site, incorporating web searches and critiques to improve confidence.
-   **Comprehensive Reporting**: Generates detailed HTML reports with interactive visualizations, quantitative scores, and AI assessments for each site.
-   **Reproducibility**: Built on public data sources and open-source Python libraries, ensuring the analysis is fully reproducible.

## How to Run the System

### Prerequisites

1.  **Python**: Python 3.8 or higher is required.
2.  **Dependencies**: Install the required Python packages. A `requirements.txt` would typically be provided. Key dependencies include `rasterio`, `geopandas`, `openai`, `langgraph`, and `google-earth-engine`.
3.  **API Keys**: The system requires several API keys to function correctly. These should be set as environment variables, typically in a `.env` file.
    -   `OPENAI_API_KEY`: For accessing OpenAI models.
    -   `TAVILY_API_KEY`: For the web search agent.
    -   `OPENTOPOGRAPHY_API_KEY`: For high-resolution elevation data.
    -   `GOOGLE_EARTH_ENGINE_API_KEY`: For GEE project authentication.

### Execution

To start the archaeological expedition, run the main script from your terminal:

```bash
python "Amazon Final.py"
```

The script will execute the entire pipeline: generating candidate sites, shortlisting them, performing detailed analysis through the agentic workflow, and finally, generating the output reports and maps.

## Understanding the Output

The script creates a main run directory named `amazon_z_discovery_[TIMESTAMP]` for each execution. This directory contains all the data, results, and reports for the expedition.

```
amazon_z_discovery_YYYYMMDD_HHMMSS/
├── data/
│   ├── AMZN_SITE_ID_1/
│   │   ├── biodiversity/
│   │   ├── elevation/
│   │   ├── satellite/
│   │   ├── processed/
│   │   └── metadata/
│   ├── ... (one folder for each analyzed site)
├── logs/
│   └── amazon_discovery_[TIMESTAMP].log
├── maps/
│   ├── interactive_sites_map.html
│   └── [SITE_ID]_overview.png
├── outputs/
│   └── expedition_summary_[TIMESTAMP].txt
└── reports/
    └── amazon_discovery_report_[TIMESTAMP].html
```

## Sample Outputs

Below are some examples of the outputs generated by the system.

### Site Overview Map

This is a composite image showing multiple data layers for a single candidate site, including satellite imagery, elevation, and detected anomalies.

*Note: The image below is a placeholder. You will need to add the `.png` map files generated by the script to the `maps` directory in your repository for it to appear.*

![Site Overview Map](https://github.com/2105789/OpenAI-to-Z-Challenge/blob/main/amazon_z_discovery_20250628_193216/maps/AMZN_1.968S_58.017W_overview.png?raw=true)

### Interactive Map and Report

The system generates a detailed HTML report and an interactive map to explore the results.

-   **[View the Interactive Discovery Map](https://2105789.github.io/OpenAI-to-Z-Challenge/amazon_z_discovery_20250628_193216/maps/interactive_sites_map.html)**
-   **[Read the Full Expedition Report](https://2105789.github.io/OpenAI-to-Z-Challenge/amazon_z_discovery_20250628_193216/reports/amazon_discovery_report_20250628_193216.html)**

### Expedition Summary

A summary of the expedition is saved to a text file.

```text
🏛️ AMAZON ARCHAEOLOGICAL EXPEDITION SUMMARY
══════════════════════════════════════════════════════════════

📊 ANALYSIS STATISTICS:
   • Total Sites Analyzed: 8
   • High Confidence Sites (>75%): 0
   • Medium Confidence Sites (50-75%): 6
   • Maps Generated: 0
   • Duration: 0:59:04.662083

🎯 RECOMMENDED DISCOVERY:
               • Site ID: Unknown
               • Confidence: 72.5%
            • Location: Unknown

🛰️ DATA SOURCES UTILIZED:
   • Sentinel-2 L2A optical imagery (10m resolution)
   • Landsat 8/9 multispectral (30m resolution)
   • Sentinel-1 SAR data (10m resolution)
   • Multiple DEM sources (SRTM, NASA, Copernicus)
   • GBIF biodiversity occurrence data
   • OpenTopography LiDAR data

🤖 AI MODELS DEPLOYED:
   • GPT-4.1 for expert archaeological analysis
   • o3-mini for rapid hypothesis generation
   • LLM7 for specialized remote sensing evaluation

📁 OUTPUTS GENERATED:
   • Comprehensive HTML report
   • Interactive discovery map
   • Individual site analysis maps
   • Quantitative confidence scores
   • Reproducible methodology documentation

══════════════════════════════════════════════════════════════
```

### Directory Breakdown

-   **`data/`**: This directory stores all the raw and processed data for each analyzed site. Each site has its own sub-directory, named with a unique Site ID (e.g., `AMZN_1.968S_58.017W`).
    -   **`biodiversity/`**: Contains `.json` files with data on indicator species occurrences from GBIF.
    -   **`elevation/`**: Holds Digital Elevation Model (DEM) files (`.tif`) from sources like SRTM and NASA DEM.
    -   **`satellite/`**: Stores satellite imagery, organized by sensor (e.g., `landsat`, `sentinel2`).
    -   **`processed/`**: Contains derived data products like hillshade maps, slope, aspect, and vegetation indices (e.g., NDVI).
    -   **`metadata/`**: Includes a `.json` file with metadata about the data collection process for the site.

-   **`logs/`**: Contains a detailed log file (`.log`) for the run, which is useful for debugging and tracking the analysis process.

-   **`maps/`**: This directory contains visual outputs.
    -   `interactive_sites_map.html`: An interactive map created with Folium, showing the locations of all analyzed sites with popups containing key information.
    -   `[SITE_ID]_overview.png`: For each site, a composite image is generated showing different data layers like RGB imagery, hillshade, and vegetation analysis.

-   **`outputs/`**: Contains summary files from the expedition.
    -   `expedition_summary_[TIMESTAMP].txt`: A concise text file summarizing the expedition's results, including statistics and the top recommended site.

-   **`reports/`**: The final, comprehensive output of the system.
    -   `amazon_discovery_report_[TIMESTAMP].html`: A detailed HTML report that includes an executive summary, an overview of the methodology, and a detailed breakdown of the analysis for each site, including AI assessments and quantitative scores. 